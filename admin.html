<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åå°ç”Ÿæˆå™¨</title>
    <style>
        body { background: #222; color: #fff; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        input { padding: 10px; margin: 5px; background: #000; color: #fff; border: 1px solid #555; }
        button { padding: 10px 20px; background: gold; border: none; font-weight: bold; cursor: pointer; margin-top: 10px;}
        #result { margin-top: 20px; padding: 20px; background: #000; border: 1px dashed #666; width: 80%; word-break: break-all; font-family: monospace; display: none;}
        .card { display: inline-block; width: 80px; height: 100px; background: #444; margin: 10px; text-align: center; line-height: 100px; border: 2px solid #666;}
        .dead { background: #500; border-color: red; }
    </style>
</head>
<body>
    <h1>ğŸ”’ ç®¡ç†å‘˜æ§åˆ¶å°</h1>
    <div>
        <input type="text" id="id" placeholder="æœŸæ•° (å¦‚: ç¬¬002æœŸ)">
        <input type="text" id="p1" placeholder="ç©å®¶1">
        <input type="text" id="p2" placeholder="ç©å®¶2">
        <input type="text" id="p3" placeholder="ç©å®¶3">
    </div>
    <button onclick="runGame()">âš¡ å¼€å§‹å¤„å†³å¹¶ç”Ÿæˆä»£ç </button>

    <div id="visual" style="margin: 20px;"></div>
    
    <div id="result">
        <h3 style="color:gold; margin-top:0;">âœ… å¤åˆ¶ä¸‹é¢çš„ä»£ç æ·»åŠ åˆ° data.js:</h3>
        <div id="codeBox" style="color: #0f0;"></div>
    </div>

    <script>
        function runGame() {
            const id = document.getElementById('id').value || "æµ‹è¯•æœŸ";
            const players = [
                document.getElementById('p1').value || "A",
                document.getElementById('p2').value || "B",
                document.getElementById('p3').value || "C"
            ];

            // 1. çœŸæ­£çš„éšæœºé€»è¾‘åœ¨è¿™é‡Œè¿è¡Œ
            let alive = [0, 1, 2];
            let outSequence = [];

            // ç¬¬ä¸€è½®æ·˜æ±°
            let r1 = Math.floor(Math.random() * alive.length);
            outSequence.push(alive[r1]);
            alive.splice(r1, 1);

            // ç¬¬äºŒè½®æ·˜æ±°
            let r2 = Math.floor(Math.random() * alive.length);
            outSequence.push(alive[r2]);
            alive.splice(r2, 1);

            // å‰©ä¸‹çš„å°±æ˜¯èµ¢å®¶
            const winnerIdx = alive[0];

            // 2. ç”Ÿæˆå¯è§†åŒ–ç»“æœç»™ç®¡ç†å‘˜çœ‹
            const v = document.getElementById('visual');
            v.innerHTML = `æ·˜æ±°é¡ºåº: ${players[outSequence[0]]} -> ${players[outSequence[1]]} <br> ğŸ† èµ¢å®¶: ${players[winnerIdx]}`;

            // 3. ç”Ÿæˆä»£ç 
            const date = new Date().toISOString().split('T')[0];
            const jsonCode = `{ id: "${id}", players: ${JSON.stringify(players)}, outSequence: ${JSON.stringify(outSequence)}, winnerIdx: ${winnerIdx}, date: "${date}" },`;
            
            document.getElementById('result').style.display = 'block';
            document.getElementById('codeBox').innerText = jsonCode;
        }
    </script>
</body>
</html>